<div id="createAccount-Container">
  <div class="createAccount-maintext">
    <h1 id="welcome-text">Bienvenido a Whisp</h1>
    <h1 id="welcome-text2">Crear cuenta</h1>
  </div>
  <h2 id="createAccount-Text">Crear cuenta</h2>
  <form [formGroup]="form" id="createAccount-Form" (ngSubmit)="onSubmit()">
    <section>
      <label for="email">Correo</label>
      <div>
        <input id="email" placeholder="pedro@example.com" formControlName="email">
        @if (form.get('email')?.touched && form.get('email')?.hasError('required')) {
          <span class="error-message">Es obligatorio introducir un email</span>
        }
        @if (form.get('email')?.touched && form.get('email')?.hasError('email')) {
          <span class="error-message">El patrón del email es incorrecto</span>
        }
        <!--
        @if (form.controls.email.touched && form.controls.email.hasError('required')) {
          <span class="error-message">Es un campo requerido</span>
        }
        -->
      </div>
    </section>
    <section>
      <label for="password">Contraseña</label>
      <input type="password" id="password" placeholder="Contraseña" formControlName="password">
      @if (form.get('password')?.touched && form.get('password')?.hasError('required')) {
        <span class="error-message">Es obligatorio introducir una contraseña</span>
      }
      @if (form.get('password')?.touched && form.get('password')?.hasError('minLength')) {
        <span class="error-message">La contraseña debe de contener al menos 8 dígitos</span>
      }
      @if (form.get('password')?.touched && form.get('password')?.hasError('maxLength')) {
        <span class="error-message">La contraseña debe de contener menos de 15 dígitos</span>
      }
      @if (form.get('password')?.touched && form.get('password')?.hasError('pattern')) {
        <span class="error-message">La contraseña no sigue el patrón correcto</span>
        <span class="error-message">1 Mayúscula</span>
        <span class="error-message">1 Minúsucla</span>
        <span class="error-message">1 Carácter especial</span>
      }
    </section>
    <section>
      <label for="confirm-password">Confirmar contraseña</label>
      <input type="password" id="confirm-password" placeholder="Contraseña" formControlName="password_confirmation">
      @if (form.get('password_confirmation')?.touched && form.get('password_confirmation')?.hasError('required')) {
        <span class="error-message">Es obligatorio introducir una contraseña</span>
      }
      @if (form.get('password_confirmation')?.touched && form.get('password_confirmation')?.hasError('minLength')) {
        <span class="error-message">La contraseña debe de contener al menos 8 dígitos</span>
      }
      @if (form.get('password_confirmation')?.touched && form.get('password_confirmation')?.hasError('maxLength')) {
        <span class="error-message">La contraseña debe de contener menos de 15 dígitos</span>
      }
      @if (form.get('password_confirmation')?.touched && form.get('password_confirmation')?.hasError('pattern')) {
        <span class="error-message">La contraseña no sigue el patrón correcto</span>
        <span class="error-message">1 Mayúscula</span>
        <span class="error-message">1 Minúsucla</span>
        <span class="error-message">1 Carácter especial</span>
      }
      @if (showPasswordMatchError()) {
        <span class="error-message">Las contraseñas no coinciden</span>
      }
    </section>
    <section>
      <label for="user-name">Nombre de usuario</label>
      <input id="user-name" required placeholder="ArmadilloAmarillo" formControlName="name">
      @if (form.get('name')?.touched && form.get('name')?.hasError('required')) {
        <span class="error-message">Es obligatorio introducir un nombre de usuario</span>
      }
      @if (form.get('name')?.touched && form.get('name')?.errors?.['userNameExists']) {
        <span class="error-message">El nombre de usuario ya existe</span>
      }
    </section>
    <section>
      <label for="birthdate">Fecha de nacimiento</label>
      <input id="birthdate" type="date" required formControlName="birthday" min="1900-01-01" max="{{ formatDateForMax() }}">
      @if (form.get('birthday')?.touched && form.get('birthday')?.hasError('required')) {
        <span class="error-message">Es obligatorio introducir la fecha de nacimiento</span>
      }
      @if (form.get('birthday')?.touched && form.get('birthday')?.errors?.['tooYoung']) {
        <span class="error-message">Debe tener al menos 12 años</span>
      }
      @if (form.get('birthday')?.touched && form.get('birthday')?.errors?.['futureDate']) {
        <span class="error-message">La fecha no puede ser en el futuro</span>
      }
    </section>
    <section id="createAccount-Field">
      <button id="createAccountButton" type="submit">Crear cuenta</button>
    </section>
  </form>
</div>

<!--
<div>
  <pre>Formulario valido: {{form.valid}}</pre>
</div>
<div>
  <pre>{{form.value | json }}</pre>
</div>
-->
