<div id="login-container" [class.expanded]="isFormTouchedAndInvalid">
  <div class="login-maintext">
    <h1 id="welcome-text">Bienvenido a Whisp</h1>
    <h1 id="welcome-text2">Iniciar sesión</h1>
  </div>
  <h2 id="LogIn-Text">Iniciar sesión</h2>
  <form [formGroup]="form" id="logIn-Form" (ngSubmit)="onSubmit()">
    <div class="border">
    <section>
      <div>
        <ion-input label="Email" labelPlacement="stacked" id="email" placeholder="pedro@example.com" formControlName="email"></ion-input>
        @if (form.get('email')?.touched && form.get('email')?.dirty
        && form.get('email')?.hasError('required')) {
          <span class="error-message">Es obligatorio introducir un email</span>
        }
        @if (form.get('email')?.touched && form.get('email')?.dirty
        && form.get('email')?.hasError('email')) {
          <span class="error-message">El patrón del email es incorrecto</span>
        }
      </div>
    </section>
    <section>
      <ion-input type="password" id="password" placeholder="Contraseña" formControlName="password" label="Contraseña" labelPlacement="stacked">
        <ion-input-password-toggle slot="end"></ion-input-password-toggle>
      </ion-input>
      @if (form.get('password')?.touched && form.get('password')?.dirty
      && form.get('password')?.hasError('required')) {
        <span class="error-message">Es obligatorio introducir una contraseña</span>
      }
      @if (form.get('password')?.touched && form.get('password')?.dirty
      && form.get('password')?.hasError('minLength')) {
        <span class="error-message">La contraseña debe de contener al menos 8 dígitos</span>
      }
      @if (form.get('password')?.touched && form.get('password')?.dirty
      && form.get('password')?.hasError('pattern')) {
        <span class="error-message">La contraseña no sigue el patrón correcto</span>
        <span class="error-message">1 Mayúscula</span>
        <span class="error-message">1 Minúsucla</span>
        <span class="error-message">1 Carácter especial</span>
      }
    </section>
    </div>
    <section class="inputOptions-Field" id="logIn-Button-Field">
      <ion-button type="submit" id="login-button">Iniciar sesion</ion-button>
      <ion-alert
        trigger="login-button"
        [header]="alertHeader"
        [message]="alertMessage"
        [buttons]= "alertButton"
        (didDismiss)="onAlertDidDismiss()"
      ></ion-alert>
    </section>
    <section class="inputOptions-Field">
      <p class="forgot-Password-Text">¿Aún no tienes cuenta?</p>
      <a class="forgot-Password-Text" [routerLink]="['/create-account']">Crea tu cuenta</a>
    </section>
  </form>
</div>

